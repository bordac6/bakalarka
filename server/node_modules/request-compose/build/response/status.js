'use strict';

module.exports = function () {
  return function (_ref) {
    var res = _ref.res,
        body = _ref.body,
        _ref$raw = _ref.raw,
        raw = _ref$raw === undefined ? body : _ref$raw;


    if (!/^2/.test(res.statusCode)) {
      var err = new Error();

      err.message = res.statusCode + ' ' + res.statusMessage;

      err.res = res;
      err.body = body;
      err.raw = raw;

      throw err;
    }

    return { res, body, raw };
  };
};