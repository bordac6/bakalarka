'use strict';

var compose = require('request-compose');
var Request = compose.Request;
var Response = compose.Response;
Request.oauth = require('request-oauth');

module.exports = function (args) {
  return compose(Request.defaults(args), function () {
    return args.url ? Request.url(args.url) : function (_ref) {
      var options = _ref.options;
      return { options };
    };
  }(), function () {
    return args.qs ? Request.qs(args.qs) : function (_ref2) {
      var options = _ref2.options;
      return { options };
    };
  }(), function () {
    return args.form ? Request.form(args.form) : args.json ? Request.json(args.json) : args.body ? Request.body(args.body) : function (_ref3) {
      var options = _ref3.options,
          body = _ref3.body;
      return { options, body };
    };
  }(), function () {
    return args.auth ? Request.auth(args.auth) : args.oauth ? Request.oauth(args.oauth) : function (_ref4) {
      var options = _ref4.options,
          body = _ref4.body;
      return { options, body };
    };
  }(), function () {
    return function (_ref5) {
      var options = _ref5.options,
          body = _ref5.body;
      return body ? Request.length()({ options, body }) : { options };
    };
  }(), Request.send(), Response.buffer(),
  // Response.parse(),
  Response.status())();
};